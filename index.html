<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Cineflix</title>
  <style>
    body, html {
      margin: 0; padding: 0;
      font-family: 'Segoe UI', Arial, sans-serif;
      background: linear-gradient(135deg, #0f0f0f, #1c1c1c);
      color: #fff;
    }

    /* Navbar */
    nav {
      display: flex; justify-content: space-between; align-items: center;
      padding: 15px 30px; background: #181818;
      position: sticky; top: 0; z-index: 50;
    }
    nav h2 { color: #f5c518; margin: 0; }
    nav ul { list-style: none; display: flex; gap: 20px; margin: 0; padding: 0; }
    nav ul li { cursor: pointer; transition: color 0.3s; }
    nav ul li.active, nav ul li:hover { color: #f5c518; font-weight: bold; }

    /* Hero */
    .hero {
      background: url('https://wallpaperaccess.com/full/329583.jpg') center/cover no-repeat;
      min-height: 60vh;
      display: flex; flex-direction: column;
      justify-content: center; align-items: center;
      text-align: center; padding: 20px;
    }
    .hero h1 { font-size: 2.5rem; color: #f5c518; }
    .search-bar { margin-top: 20px; }
    .search-bar input {
      padding: 12px 20px; width: 90%; max-width: 400px;
      border-radius: 25px; border: none; outline: none;
      font-size: 1rem;
    }

    /* Sections */
    .page { display: none; padding: 30px; }
    .page.active { display: block; }

    .movie-list {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
      gap: 20px;
    }
    .movie-card {
      background: #1e1e1e; border-radius: 12px;
      overflow: hidden; cursor: pointer;
      transition: transform 0.3s, box-shadow 0.3s;
      display: flex; flex-direction: column;
    }
    .movie-card:hover { transform: scale(1.05); box-shadow: 0 5px 15px rgba(0,0,0,0.5); }
    .movie-card img { width: 100%; height: 240px; object-fit: cover; }
    .movie-card h4 { margin: 10px; font-size: 1rem; }
    .movie-card p { margin: 0 10px 10px; font-size: 0.9rem; color: #bbb; }

    /* Modal */
    #movieModal {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,0.9);
      justify-content: center; align-items: center;
      z-index: 200; padding: 20px;
    }
    #movieModalContent {
      background: #1c1c1c; padding: 20px; border-radius: 12px;
      max-width: 600px; width: 100%; text-align: center;
    }
    #movieModal img { width: 200px; border-radius: 10px; margin-bottom: 15px; }
    #closeModal {
      position: absolute; top: 20px; right: 30px;
      font-size: 2rem; cursor: pointer; color: white;
    }

    button {
      background: #f5c518; border: none; padding: 8px 12px;
      margin: 8px; border-radius: 6px; cursor: pointer;
      font-weight: bold;
    }
    button:hover { background: #e4b213; }
  </style>
</head>
<body>
  <nav>
    <h2>üé¨ Cineflix</h2>
    <ul>
      <li data-page="home" class="active">Home</li>
      <li data-page="trending">Trending</li>
      <li data-page="genres">Genres</li>
      <li data-page="mylist">My List</li>
      <li data-page="recommendations">Recommendations</li>
    </ul>
  </nav>

  <!-- Home -->
  <div id="home" class="page active">
    <section class="hero">
      <h1>Discover Your Next Favorite Movie üçø</h1>
      <div class="search-bar">
        <input id="searchInput" type="text" placeholder="Search movies...">
      </div>
    </section>
    <div class="content">
      <h2 id="homeResultsTitle">Search Results</h2>
      <div id="homeResults" class="movie-list"></div>
    </div>
  </div>

  <!-- Trending -->
  <div id="trending" class="page">
    <h2>Trending Now</h2>
    <div id="trendingList" class="movie-list"></div>
  </div>

  <!-- Genres -->
  <div id="genres" class="page">
    <h2>Browse by Genre</h2>
    <div style="margin-bottom:15px;">
      <button onclick="loadGenre('Action')">Action</button>
      <button onclick="loadGenre('Comedy')">Comedy</button>
      <button onclick="loadGenre('Drama')">Drama</button>
      <button onclick="loadGenre('Horror')">Horror</button>
      <button onclick="loadGenre('Sci-Fi')">Sci-Fi</button>
    </div>
    <div id="genreList" class="movie-list"></div>
  </div>

  <!-- My List -->
  <div id="mylist" class="page">
    <h2>My List</h2>
    <div id="myListContainer" class="movie-list"></div>
  </div>

  <!-- Recommendations -->
  <div id="recommendations" class="page">
    <h2>Recommended For You</h2>
    <div id="recommendationsContainer" class="movie-list"></div>
  </div>

  <!-- Modal -->
  <div id="movieModal">
    <span id="closeModal">&times;</span>
    <div id="movieModalContent"></div>
  </div>

  <script>
    const API_KEY = "4da95259"; // üîë replace with real OMDb key

    // Nav
    document.querySelectorAll("nav ul li").forEach(btn => {
      btn.addEventListener("click", () => {
        document.querySelectorAll("nav ul li").forEach(el => el.classList.remove("active"));
        document.querySelectorAll(".page").forEach(p => p.classList.remove("active"));
        btn.classList.add("active");
        document.getElementById(btn.dataset.page).classList.add("active");

        if (btn.dataset.page === "trending") loadTrendingMovies();
        if (btn.dataset.page === "mylist") renderMyList();
        if (btn.dataset.page === "recommendations") loadRecommendations();
      });
    });

    // Search
    document.getElementById("searchInput").addEventListener("keyup", e => {
      if (e.key === "Enter") searchMovies(e.target.value, "homeResults");
    });

    async function searchMovies(query, containerId) {
      if (!query) return;
      const res = await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(query)}&apikey=${API_KEY}`);
      const data = await res.json();
      const container = document.getElementById(containerId);
      container.innerHTML = "";
      if (data.Search) {
        data.Search.forEach(m => container.appendChild(createMovieCard(m)));
      } else {
        container.innerHTML = `<p>No results found</p>`;
      }
    }

    // Trending
    async function loadTrendingMovies() {
      const trending = ["Avengers", "Batman", "Inception", "Spider-Man", "Interstellar", "Matrix"];
      const container = document.getElementById("trendingList");
      container.innerHTML = "";
      for (let keyword of trending) {
        const res = await fetch(`https://www.omdbapi.com/?s=${encodeURIComponent(keyword)}&apikey=${API_KEY}`);
        const data = await res.json();
        if (data.Search) data.Search.forEach(m => container.appendChild(createMovieCard(m)));
      }
    }

    // Genres
    async function loadGenre(genre) {
      const res = await fetch(`https://www.omdbapi.com/?s=${genre}&apikey=${API_KEY}`);
      const data = await res.json();
      const container = document.getElementById("genreList");
      container.innerHTML = "";
      if (data.Search) {
        data.Search.forEach(m => container.appendChild(createMovieCard(m)));
      }
    }

    // My List
    function addToMyList(movie) {
      let list = JSON.parse(localStorage.getItem("myList")) || [];
      if (!list.find(m => m.imdbID === movie.imdbID)) {
        list.push(movie);
        localStorage.setItem("myList", JSON.stringify(list));
        alert("Added to My List!");
      }
    }
    function renderMyList() {
      let list = JSON.parse(localStorage.getItem("myList")) || [];
      const container = document.getElementById("myListContainer");
      container.innerHTML = "";
      if (list.length === 0) {
        container.innerHTML = "<p>No movies in your list.</p>";
      } else {
        list.forEach(m => container.appendChild(createMovieCard(m, false)));
      }
    }

    // Recommendations
    async function loadRecommendations() {
      let list = JSON.parse(localStorage.getItem("myList")) || [];
      const container = document.getElementById("recommendationsContainer");
      container.innerHTML = "";

      if (list.length === 0) {
        container.innerHTML = "<p>Please add movies to your list first!</p>";
        return;
      }

      // Collect genres from My List
      for (let movie of list) {
        const res = await fetch(`https://www.omdbapi.com/?i=${movie.imdbID}&apikey=${API_KEY}`);
        const details = await res.json();
        if (details.Genre) {
          const firstGenre = details.Genre.split(",")[0];
          const searchRes = await fetch(`https://www.omdbapi.com/?s=${firstGenre}&apikey=${API_KEY}`);
          const data = await searchRes.json();
          if (data.Search) {
            data.Search
              .filter(m => !list.find(saved => saved.imdbID === m.imdbID)) // skip already saved
              .forEach(m => container.appendChild(createMovieCard(m)));
          }
        }
      }
    }

    // Movie card + Modal
    function createMovieCard(movie, showAdd = true) {
      const card = document.createElement("div");
      card.classList.add("movie-card");
      card.dataset.id = movie.imdbID;
      card.innerHTML = `
        <img src="${movie.Poster !== "N/A" ? movie.Poster : "https://via.placeholder.com/300x450?text=No+Image"}">
        <h4>${movie.Title}</h4>
        <p>${movie.Year}</p>
      `;
      card.addEventListener("click", () => getMovieDetails(movie.imdbID));
      if (showAdd) {
        const btn = document.createElement("button");
        btn.textContent = "‚ûï Add to My List";
        btn.addEventListener("click", e => {
          e.stopPropagation();
          addToMyList(movie);
        });
        card.appendChild(btn);
      }
      return card;
    }

    const modal = document.getElementById("movieModal");
    const modalContent = document.getElementById("movieModalContent");
    document.getElementById("closeModal").addEventListener("click", () => {
      modal.style.display = "none";
    });

    async function getMovieDetails(id) {
      const res = await fetch(`https://www.omdbapi.com/?i=${id}&apikey=${API_KEY}`);
      const movie = await res.json();
      modalContent.innerHTML = `
        <img src="${movie.Poster !== "N/A" ? movie.Poster : "https://via.placeholder.com/200x300?text=No+Image"}">
        <h2>${movie.Title} (${movie.Year})</h2>
        <p><strong>Genre:</strong> ${movie.Genre}</p>
        <p><strong>Plot:</strong> ${movie.Plot}</p>
        <p><strong>IMDB Rating:</strong> ‚≠ê ${movie.imdbRating}</p>
      `;
      modal.style.display = "flex";
    }
  </script>
</body>
</html>
